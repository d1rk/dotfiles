#!/bin/bash
# copyright d1rk.com
#version = 1

function usage(){
	echo ""
	echo "$0 $version"
	echo "usage: $0 init"
	echo "usage: $0 to mbp"
	echo ""  
	exit -1
}

function version(){
	echo "$0 version: $version"
}

function init() {
	echo "not implemented yet"
}

function change() {

	cd $HOME/.ssh

	if [ -h "id_rsa.pub" ]
		then
			rm -rf id_rsa.pub
		else
			if (test -e "id_rsa_$1.pub")
				then
					mv id_rsa.pub id_rsa_orig.pub 
			fi
	fi

	if [ -h "id_rsa" ]
		then
			rm -rf id_rsa
		else
			if (test -e "id_rsa_$1")
				then
					mv id_rsa id_rsa_orig 
			fi
	fi

	ln -s id_rsa_$1.pub id_rsa.pub
	ln -s id_rsa_$1 id_rsa
	
	echo "Switched to $1"
}

if ( test -z "$1" )
	then
		if test "--version" = "$1" 
			then 
				version
			else
				usage
		fi
	exit -1
fi

case $1 in
	"--version")version;;
	"to")change $2;;

	"--help")usage;;
	*)usage;;
esac
